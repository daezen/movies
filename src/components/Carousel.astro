---
import MoviePreview from './MoviePreview.astro'
import options from '../lib/api'
const { kind } = Astro.props
const popular = 'https://api.themoviedb.org/3/movie/popular?language=en-US&page=1'
const toprated = 'https://api.themoviedb.org/3/movie/top_rated?language=en-US&page=1'
const url = kind === 'trending' ? popular : toprated
const res = await fetch(url, options)
const { results: movies } = await res.json()
---

<div class="flex gap-6 w-screen overflow-auto pr-20 mb-10" data-carousel={kind}>
  {movies.map(movie => <MoviePreview src={movie.backdrop_path} name={movie.title} rating={movie.vote_average} id={movie.id} />)}
</div>

<style>
  div[data-carousel]::-webkit-scrollbar {
    display: none;
  }
  div[data-carousel] {
    scrollbar-width: none;
  }
</style>
