---
import MoviePreview from './MoviePreview.astro'
import options from '../lib/api'
const { kind } = Astro.props
const category = kind === 'popular' ? 'popular' : 'top_rated'
const BASE_URL = `https://api.themoviedb.org/3/movie/${category}?language=en-US&page=1`
const res = await fetch(BASE_URL, options)
const { results: movies } = await res.json()
---

<div class="flex gap-6 w-screen overflow-auto pr-20 mb-10" data-carousel={kind}>
  {movies.map(movie => <MoviePreview src={movie.backdrop_path} name={movie.title} rating={movie.vote_average} id={movie.id} />)}
</div>

<style>
  div[data-carousel]::-webkit-scrollbar {
    display: none;
  }
  div[data-carousel] {
    scrollbar-width: none;
  }
</style>
